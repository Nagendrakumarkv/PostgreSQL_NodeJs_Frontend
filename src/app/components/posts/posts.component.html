<div class="container mt-4">
  <h2>Posts</h2>
  <div class="card mb-3" *ngFor="let post of posts">
    <div class="card-body">
      <input type="text" class="form-control mb-2" [(ngModel)]="post.title" />
      <textarea class="form-control mb-2" [(ngModel)]="post.content"></textarea>
      <p class="card-text">
        <small class="text-muted"
          >By {{ post.user.name }} on {{ post.createdAt | date }}</small
        >
      </p>
      <button class="btn btn-primary me-2" (click)="editPost(post)">
        Update
      </button>
      <button class="btn btn-danger" (click)="deletePost(post.id)">
        Delete
      </button>
      <h6 class="mt-3">Comments:</h6>
      <ul class="list-group list-group-flush">
        <li
          class="list-group-item d-flex justify-content-between"
          *ngFor="let comment of post.comments"
        >
          <input
            type="text"
            class="form-control me-2"
            [(ngModel)]="comment.content"
          />
          <div>
            <button
              class="btn btn-sm btn-primary me-2"
              (click)="editComment(comment)"
            >
              Update
            </button>
            <button
              class="btn btn-sm btn-danger"
              (click)="deleteComment(comment.id)"
            >
              Delete
            </button>
          </div>
        </li>
      </ul>
      <div class="input-group mt-3">
        <input
          type="text"
          class="form-control"
          [(ngModel)]="newComment[post.id].content"
          placeholder="Add a comment"
        />
        <input
          type="number"
          class="form-control"
          [(ngModel)]="newComment[post.id].userId"
          placeholder="User ID"
        />
        <button class="btn btn-primary" (click)="addComment(post.id)">
          Comment
        </button>
      </div>
    </div>
  </div>
</div>
